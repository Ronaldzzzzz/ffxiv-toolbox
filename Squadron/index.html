<!DOCTYPE html>
<html lang="zh-TW" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FF14 ÂÜíÈö™ËÄÖÂàÜÈöäË®àÁÆóÂô®</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <link rel="stylesheet" href="style.css">
    <script src="squadron_data.js"></script>
    <script src="squadron_calc.js"></script>
</head>

<body
    class="bg-slate-50 text-slate-900 dark:bg-slate-900 dark:text-slate-100 min-h-screen font-sans selection:bg-blue-500 selection:text-white flex flex-col">

    <nav class="bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 shadow-md transition-colors">
        <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-xl font-bold text-slate-800 dark:text-yellow-500 flex items-center gap-2">
                <span data-i18n="title">FF14 ÂÜíÈö™ËÄÖÂàÜÈöäË®àÁÆóÂô®</span>
                <span
                    class="text-xs px-2 py-0.5 rounded bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 ml-2 border border-blue-200 dark:border-blue-700">
                    V2.5</span>
            </h1>
            <div class="flex items-center gap-4">
                <a href="../index.html"
                    class="text-sm text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors flex items-center gap-1">
                    <span data-i18n="nav_home">ÂõûÈ¶ñÈ†Å</span>
                </a>
                <div
                    class="flex space-x-1 bg-slate-100 dark:bg-slate-900 p-0.5 rounded border border-slate-300 dark:border-slate-700">
                    <button onclick="changeLanguage('zh-TW')"
                        class="px-2 py-0.5 text-xs rounded opacity-50 hover:opacity-100 transition-opacity"
                        id="lang-tw">ÁπÅ</button>
                    <button onclick="changeLanguage('zh-CN')"
                        class="px-2 py-0.5 text-xs rounded opacity-50 hover:opacity-100 transition-opacity"
                        id="lang-cn">ÁÆÄ</button>
                    <button onclick="changeLanguage('ja')"
                        class="px-2 py-0.5 text-xs rounded opacity-50 hover:opacity-100 transition-opacity"
                        id="lang-ja">Êó•</button>
                    <button onclick="changeLanguage('en')"
                        class="px-2 py-0.5 text-xs rounded opacity-50 hover:opacity-100 transition-opacity"
                        id="lang-en">EN</button>
                </div>
                <button id="theme-toggle" onclick="toggleTheme()"
                    class="border border-slate-300 dark:border-slate-600 text-slate-500 dark:text-slate-400 p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors">
                    üåô
                </button>
            </div>
        </div>
    </nav>
    <div class="max-w-7xl mx-auto p-6 w-full flex-grow">

        <div
            class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 mb-8 transition-colors">
            <div class="flex justify-between items-center mb-4 border-b border-slate-200 dark:border-slate-700 pb-2">
                <h2 class="text-lg font-bold text-slate-800 dark:text-slate-200" data-i18n="section_1_title">
                    1. ÂàÜÈöäÁãÄÊÖã & ‰ªªÂãôÈúÄÊ±Ç</h2>
                <button onclick="toggleSection1()" id="btn-toggle-s1" class="w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 dark:bg-slate-700 text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white hover:bg-slate-200 dark:hover:bg-slate-600 transition-all duration-200 transform">
                    ‚ñº
                </button>
            </div>

            <!-- Summary View (Hidden by default) -->
            <div id="section-1-summary" class="hidden p-4 bg-slate-50 dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-700 items-center justify-between gap-4 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors" onclick="toggleSection1()">
                 <div class="flex items-center gap-6 text-base flex-wrap justify-center w-full">
                    <div class="flex items-center gap-2">
                        <span class="font-bold text-slate-600 dark:text-slate-400" data-i18n="current_stats_title">ÁõÆÂâçË®ìÁ∑¥ (Stats):</span>
                        <div class="font-mono font-bold flex gap-2 text-lg">
                             <span class="text-red-500">P:<span id="sum-p">0</span></span>
                             <span class="text-blue-500">M:<span id="sum-m">0</span></span>
                             <span class="text-yellow-500">T:<span id="sum-t">0</span></span>
                        </div>
                    </div>
                    <div class="w-px h-4 bg-slate-300 dark:bg-slate-600 hidden sm:block"></div>
                    <div class="flex items-center gap-2">
                        <span class="font-bold text-slate-600 dark:text-slate-400" data-i18n="mission_req_title">‰ªªÂãôÈúÄÊ±Ç (Req):</span>
                        <div class="font-mono font-bold flex gap-2 text-lg">
                             <span class="text-red-500">P:<span id="sum-req-p">0</span></span>
                             <span class="text-blue-500">M:<span id="sum-req-m">0</span></span>
                             <span class="text-yellow-500">T:<span id="sum-req-t">0</span></span>
                        </div>
                    </div>
                 </div>
            </div>

            <div id="section-1-content" class="transition-all duration-300 ease-in-out origin-top">
                <!-- Row 1: Rank & Training Stats (Unified) -->
            <div
                class="bg-slate-50 dark:bg-slate-900 p-6 rounded-lg mb-6 border border-slate-200 dark:border-slate-700">
                <div class="flex flex-col lg:flex-row gap-8 items-center justify-center">

                    <!-- Left: Rank & Pool Cap -->
                    <div
                        class="w-auto flex flex-col items-center justify-center lg:border-r border-slate-200 dark:border-slate-700 lg:pr-8">
                        <div class="flex flex-col items-center mb-4">
                            <label for="rank-selector" class="mb-1 font-bold text-sm" data-i18n="rank_label">ÂàÜÈöäÁ≠âÁ¥ö
                                (Rank)</label>
                            <select id="rank-selector" onchange="updateRankCap()"
                                class="p-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 w-[200px]">
                                <option value="1">Rank 1 (Max 200)</option>
                                <option value="2">Rank 2 (Max 280)</option>
                                <option value="3" selected>Rank 3 (Max 400)</option>
                            </select>
                        </div>
                        <div class="text-xs text-slate-500 dark:text-slate-400 flex flex-col items-center gap-1">
                            <div><span data-i18n="pool_cap_label">Ë®ìÁ∑¥Â±¨ÊÄßÊ±†‰∏äÈôê:</span> <span id="pool-cap-display"
                                    class="font-bold text-blue-600 dark:text-yellow-500 text-lg">400</span></div>
                            <div><span data-i18n="current_sum_label">ÁõÆÂâçËº∏ÂÖ•Á∏ΩÂíå:</span> <span id="current-sum-display"
                                    class="font-mono">400</span></div>
                            <div id="sum-warning" class="text-red-500 font-bold hidden" data-i18n="sum_warning">‚ö†Ô∏è
                                Á∏ΩÂíå‰∏çÁ¨¶ÔºåË´ã‰øÆÊ≠£</div>
                        </div>
                    </div>

                    <!-- Right: Training Stats -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 w-auto">

                        <!-- 1. Current Stats Inputs -->
                        <div
                            class="flex flex-col items-center bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 h-full justify-center">
                            <p class="text-center mb-4 font-bold text-slate-600 dark:text-slate-400"
                                data-i18n="current_stats_title">ÁõÆÂâçË®ìÁ∑¥Êï∏ÂÄº (Training Stats)</p>
                            <div class="flex justify-center gap-6">
                                <div class="flex flex-col items-center">
                                    <label class="font-bold text-sm stat-phy mb-1" data-i18n="stat_p">P</label>
                                    <input type="number" id="curr-p" step="20" value="140" max="400" min="0"
                                        oninput="validateSum(); saveSquadronDataDebounced()"
                                        class="w-24 p-3 text-lg text-center border rounded-lg bg-gray-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white shadow-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                                    <div id="delta-p"
                                        class="text-xs font-bold h-4 text-center mt-1 transition-all opacity-0"></div>
                                </div>
                                <div class="flex flex-col items-center">
                                    <label class="font-bold text-sm stat-men mb-1" data-i18n="stat_m">M</label>
                                    <input type="number" id="curr-m" step="20" value="140" max="400" min="0"
                                        oninput="validateSum(); saveSquadronDataDebounced()"
                                        class="w-24 p-3 text-lg text-center border rounded-lg bg-gray-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white shadow-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                                    <div id="delta-m"
                                        class="text-xs font-bold h-4 text-center mt-1 transition-all opacity-0"></div>
                                </div>
                                <div class="flex flex-col items-center">
                                    <label class="font-bold text-sm stat-tac mb-1" data-i18n="stat_t">T</label>
                                    <input type="number" id="curr-t" step="20" value="120" max="400" min="0"
                                        oninput="validateSum(); saveSquadronDataDebounced()"
                                        class="w-24 p-3 text-lg text-center border rounded-lg bg-gray-50 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white shadow-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                                    <div id="delta-t"
                                        class="text-xs font-bold h-4 text-center mt-1 transition-all opacity-0"></div>
                                </div>
                            </div>
                        </div>

                        <!-- 2. Training Buttons -->
                        <div
                            class="flex flex-col items-center bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 h-full">
                            <p class="text-center mb-4 font-bold text-slate-600 dark:text-slate-400">Âü∑Ë°åË®ìÁ∑¥ (Execute
                                Training)</p>
                            <div class="grid grid-cols-3 gap-4">
                                <!-- Physical -->
                                <div class="flex flex-col items-center gap-1 group">
                                    <button onclick="confirmTraining('phy_40')" onmouseenter="previewTraining('phy_40')"
                                        onmouseleave="clearPreview()"
                                        class="w-16 h-16 bg-slate-50 dark:bg-slate-700 rounded-xl p-2 border-2 border-slate-200 dark:border-slate-600 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-slate-600 shadow-sm transition-all flex items-center justify-center">
                                        <img src="img/training/P.png" class="w-full h-full object-contain">
                                    </button>
                                    <span
                                        class="text-xs font-medium text-slate-600 dark:text-slate-400 group-hover:text-blue-600 dark:group-hover:text-blue-400">Physical</span>
                                </div>

                                <!-- Mental -->
                                <div class="flex flex-col items-center gap-1 group">
                                    <button onclick="confirmTraining('men_40')" onmouseenter="previewTraining('men_40')"
                                        onmouseleave="clearPreview()"
                                        class="w-16 h-16 bg-slate-50 dark:bg-slate-700 rounded-xl p-2 border-2 border-slate-200 dark:border-slate-600 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-slate-600 shadow-sm transition-all flex items-center justify-center">
                                        <img src="img/training/M.png" class="w-full h-full object-contain">
                                    </button>
                                    <span
                                        class="text-xs font-medium text-slate-600 dark:text-slate-400 group-hover:text-blue-600 dark:group-hover:text-blue-400">Mental</span>
                                </div>

                                <!-- Tactical -->
                                <div class="flex flex-col items-center gap-1 group">
                                    <button onclick="confirmTraining('tac_40')" onmouseenter="previewTraining('tac_40')"
                                        onmouseleave="clearPreview()"
                                        class="w-16 h-16 bg-slate-50 dark:bg-slate-700 rounded-xl p-2 border-2 border-slate-200 dark:border-slate-600 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-slate-600 shadow-sm transition-all flex items-center justify-center">
                                        <img src="img/training/T.png" class="w-full h-full object-contain">
                                    </button>
                                    <span
                                        class="text-xs font-medium text-slate-600 dark:text-slate-400 group-hover:text-blue-600 dark:group-hover:text-blue-400">Tactical</span>
                                </div>

                                <!-- Phy/Men -->
                                <div class="flex flex-col items-center gap-1 group">
                                    <button onclick="confirmTraining('phy_men_20')"
                                        onmouseenter="previewTraining('phy_men_20')" onmouseleave="clearPreview()"
                                        class="w-16 h-16 bg-slate-50 dark:bg-slate-700 rounded-xl p-2 border-2 border-slate-200 dark:border-slate-600 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-slate-600 shadow-sm transition-all flex items-center justify-center">
                                        <img src="img/training/PM.png" class="w-full h-full object-contain">
                                    </button>
                                    <span
                                        class="text-xs font-medium text-slate-600 dark:text-slate-400 group-hover:text-blue-600 dark:group-hover:text-blue-400">Phy/Men</span>
                                </div>

                                <!-- Phy/Tac -->
                                <div class="flex flex-col items-center gap-1 group">
                                    <button onclick="confirmTraining('phy_tac_20')"
                                        onmouseenter="previewTraining('phy_tac_20')" onmouseleave="clearPreview()"
                                        class="w-16 h-16 bg-slate-50 dark:bg-slate-700 rounded-xl p-2 border-2 border-slate-200 dark:border-slate-600 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-slate-600 shadow-sm transition-all flex items-center justify-center">
                                        <img src="img/training/PT.png" class="w-full h-full object-contain">
                                    </button>
                                    <span
                                        class="text-xs font-medium text-slate-600 dark:text-slate-400 group-hover:text-blue-600 dark:group-hover:text-blue-400">Phy/Tac</span>
                                </div>

                                <!-- Men/Tac -->
                                <div class="flex flex-col items-center gap-1 group">
                                    <button onclick="confirmTraining('men_tac_20')"
                                        onmouseenter="previewTraining('men_tac_20')" onmouseleave="clearPreview()"
                                        class="w-16 h-16 bg-slate-50 dark:bg-slate-700 rounded-xl p-2 border-2 border-slate-200 dark:border-slate-600 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-slate-600 shadow-sm transition-all flex items-center justify-center">
                                        <img src="img/training/MT.png" class="w-full h-full object-contain">
                                    </button>
                                    <span
                                        class="text-xs font-medium text-slate-600 dark:text-slate-400 group-hover:text-blue-600 dark:group-hover:text-blue-400">Men/Tac</span>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>

            <!-- Row 2: Mission Requirements -->
            <div
                class="bg-slate-50 dark:bg-slate-900 p-4 rounded-lg mb-6 border border-slate-200 dark:border-slate-700 flex flex-col lg:flex-row items-stretch justify-center gap-4">

                <!-- Left: Mission Selectors -->
                <div class="flex flex-col items-center justify-start flex-1 w-full">
                    <p class="text-center mb-4 font-bold text-slate-600 dark:text-slate-400"
                        data-i18n="mission_list_title">
                        ‰ªªÂãô‰∏ÄË¶Ω (Mission List)
                    </p>
                    <div class="flex flex-row gap-4 items-center justify-center">
                        <div class="flex flex-col items-center">
                            <label class="font-bold text-sm mb-1" data-i18n="mission_label">Mission</label>
                            <select id="mission-selector" onchange="updateMissionReqs()"
                                class="p-2 rounded border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 outline-none w-80">
                                <option value="">Select Mission...</option>
                            </select>
                        </div>
                        <div class="flex flex-col items-center">
                            <label class="font-bold text-sm mb-1" data-i18n="pattern_label">Pattern</label>
                            <select id="mission-pattern" onchange="updateMissionReqs()"
                                class="p-2 rounded border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 outline-none w-40">
                            </select>
                        </div>
                    </div>
                </div>

                <!-- NEW: Affinity Selector (Multi-slot) -->
                <div class="flex flex-col items-center justify-center border-b lg:border-b-0 lg:border-r border-slate-200 dark:border-slate-700 pb-4 lg:pb-0 lg:pr-4">
                     <p class="text-center mb-2 font-bold text-slate-600 dark:text-slate-400 text-sm" data-i18n="mission_affinity_title">
                        Èö®Ê©üÁçéÂãµ (Affinity)
                    </p>
                    <div class="flex flex-col gap-2">
                        <select id="mission-affinity-1" class="p-1.5 rounded border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white text-xs focus:ring-2 focus:ring-blue-500 outline-none w-40" onchange="updateAffinityConfig()">
                            <option value="">-</option>
                        </select>
                        <select id="mission-affinity-2" class="p-1.5 rounded border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white text-xs focus:ring-2 focus:ring-blue-500 outline-none w-40" onchange="updateAffinityConfig()">
                            <option value="">-</option>
                        </select>
                        <select id="mission-affinity-3" class="p-1.5 rounded border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white text-xs focus:ring-2 focus:ring-blue-500 outline-none w-40" onchange="updateAffinityConfig()">
                            <option value="">-</option>
                        </select>
                    </div>
                </div>

                <!-- Right: Title & Inputs -->
                <div class="flex flex-col items-center justify-start flex-1 w-full">
                    <p class="text-center mb-4 font-bold text-slate-600 dark:text-slate-400"
                        data-i18n="mission_req_title">
                        ‰ªªÂãôÈúÄÊ±Ç (Mission Requirements)
                    </p>
                    <div class="flex justify-center gap-4">
                        <div class="flex flex-col items-center">
                            <label class="font-bold text-sm stat-phy mb-1" data-i18n="stat_p">P</label>
                            <input type="number" id="req-p" step="5" min="0" value="315"
                                class="w-20 p-2 text-center border rounded bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white">
                        </div>
                        <div class="flex flex-col items-center">
                            <label class="font-bold text-sm stat-men mb-1" data-i18n="stat_m">M</label>
                            <input type="number" id="req-m" step="5" min="0" value="325"
                                class="w-20 p-2 text-center border rounded bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white">
                        </div>
                        <div class="flex flex-col items-center">
                            <label class="font-bold text-sm stat-tac mb-1" data-i18n="stat_t">T</label>
                            <input type="number" id="req-t" step="5" min="0" value="340"
                                class="w-20 p-2 text-center border rounded bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white">
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>


        <div
            class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 mb-8 transition-colors">
            <div class="flex justify-between items-center mb-4 border-b border-slate-200 dark:border-slate-700 pb-2">
                <div class="flex items-center gap-4">
                    <h2 class="text-lg font-bold text-slate-800 dark:text-slate-200" data-i18n="section_2_title">2. ÂàÜÈöäÊàêÂì°
                        (8‰∫∫)</h2>
                    <button onclick="openRecruitList()"
                        class="px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white text-xs rounded transition-colors flex items-center gap-1 shadow-sm">
                        <span>üìã</span> <span data-i18n="btn_recruit_list">Recruit List</span>
                    </button>
                </div>
                <div class="flex gap-2">
                    <button onclick="saveSquadronData()"
                        class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-colors flex items-center gap-1 shadow-sm">
                        <span>üíæ</span> <span data-i18n="btn_save">Save</span>
                    </button>
                    <button onclick="loadSquadronData()"
                        class="px-3 py-1 bg-slate-600 hover:bg-slate-700 text-white text-xs rounded transition-colors flex items-center gap-1 shadow-sm">
                        <span>üìÇ</span> <span data-i18n="btn_load">Load</span>
                    </button>
                    <div class="w-px h-6 bg-slate-300 dark:bg-slate-600 mx-1"></div>
                    <button onclick="openExportModal()"
                        class="px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded transition-colors flex items-center gap-1 shadow-sm">
                        <span>üì§</span> <span data-i18n="btn_export">Export</span>
                    </button>
                    <button onclick="openImportModal()"
                        class="px-3 py-1 bg-teal-600 hover:bg-teal-700 text-white text-xs rounded transition-colors flex items-center gap-1 shadow-sm">
                        <span>üì•</span> <span data-i18n="btn_import">Import</span>
                    </button>
                </div>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4" id="roster-container"></div>
        </div>

        <button id="calc-btn"
            class="w-full py-4 bg-blue-600 text-white font-bold rounded-xl shadow-lg hover:bg-blue-700 transition-all transform active:scale-95 text-lg mb-8"
            onclick="calculate()" data-i18n="calc_btn">Ë®àÁÆóÊúÄ‰Ω≥ÈÖçÁΩÆ</button>

        <div class="bg-orange-50 dark:bg-orange-900/10 p-6 rounded-xl shadow-lg border-2 border-orange-200 dark:border-orange-500/30 hidden transition-colors"
            id="result-section">
            <h2 class="text-lg font-bold mb-4 text-orange-800 dark:text-orange-200" data-i18n="result_title">Ë®àÁÆóÁµêÊûú</h2>
            <div id="result-content"></div>
        </div>
    </div>

    <footer
        class="mt-8 py-6 border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/50 text-center text-slate-500 dark:text-slate-600 text-[10px] md:text-xs leading-relaxed transition-colors">
        <p>FINAL FANTASY XIV ¬© 2010 - 2026 SQUARE ENIX CO., LTD. ÁâàÊ¨äÊâÄÊúâ„ÄÇ</p>
        <p>FINAL FANTASY is a registered trademark of Square Enix Holdings Co., Ltd.</p>
        <p class="mt-2 text-[10px]">
            <span>ÂèÉËÄÉË≥áÊñô‰æÜÊ∫ê:</span>
            <a href="https://ffxiv.consolegameswiki.com/wiki/Adventurer_Squadrons" target="_blank"
                rel="noopener noreferrer" class="text-blue-500 dark:text-blue-400 hover:underline">FF14 Console Games
                Wiki</a>
            |
            <a href="https://ffxivsquadron.com/" target="_blank" rel="noopener noreferrer"
                class="text-blue-500 dark:text-blue-400 hover:underline">
                FF14 Squadron</a>
            |
            <a href="https://ff14.huijiwiki.com/wiki/%E5%86%92%E9%99%A9%E8%80%85%E5%88%86%E9%98%9F" target="_blank"
                rel="noopener noreferrer" class="text-blue-500 dark:text-blue-400 hover:underline">
                Huiji Wiki</a>
            |
            <a href="https://cafemaker.wakingsands.com/" target="_blank" rel="noopener noreferrer"
                class="text-blue-500 dark:text-blue-400 hover:underline">
                Cafemaker</a>
            |
            <a href="https://xivapi.com/" target="_blank" rel="noopener noreferrer"
                class="text-blue-500 dark:text-blue-400 hover:underline">
                XIVAPI</a>
        </p>
        <p class="mt-2 text-[10px]">
            Repository: <a href="https://github.com/ronaldzzzzz/ffxiv-toolbox" target="_blank" rel="noopener noreferrer"
                class="text-blue-500 dark:text-blue-400 hover:underline">
                GitHub</a>
        </p>
    </footer>

    <!-- Recruit Selection Modal -->
    <div id="recruit-modal"
        class="fixed inset-0 z-50 hidden bg-black/50 backdrop-blur-sm flex items-center justify-center p-4">
        <div
            class="bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[80vh] flex flex-col border border-slate-200 dark:border-slate-700">
            <div class="p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                <h3 class="font-bold text-lg dark:text-white" data-i18n="modal_title">ÈÅ∏ÊìáÈöäÂì°</h3>
                <button class="text-2xl text-slate-400 hover:text-slate-900 dark:hover:text-white"
                    onclick="closeRecruitModal()">&times;</button>
            </div>
            <div id="recruit-list-container" class="p-4 overflow-y-auto flex-grow">
                <!-- Filled by JS -->
            </div>
        </div>
    </div>

    <!-- Data Import/Export Modal -->
    <div id="data-modal"
        class="fixed inset-0 z-50 hidden bg-black/50 backdrop-blur-sm flex items-center justify-center p-4">
        <div
            class="bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl flex flex-col border border-slate-200 dark:border-slate-700">
            <div class="p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                <h3 class="font-bold text-lg dark:text-white" data-i18n="modal_data_title">Â∞èÈöäË≥áÊñô</h3>
                <button class="text-2xl text-slate-400 hover:text-slate-900 dark:hover:text-white"
                    onclick="closeDataModal()">&times;</button>
            </div>
            <div class="p-4 flex flex-col gap-4">
                <textarea id="data-textarea"
                    class="w-full h-64 p-3 font-mono text-xs border border-slate-300 dark:border-slate-600 rounded bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 resize-none focus:ring-2 focus:ring-blue-500 outline-none"
                    placeholder="JSON Data..."></textarea>

                <div class="flex justify-end gap-2" id="export-actions">
                    <button onclick="copyToClipboard()"
                        class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded shadow-sm transition-colors flex items-center gap-2">
                        <span>üìã</span> <span data-i18n="btn_copy">Ë§áË£ΩÂÖßÂÆπ</span>
                    </button>
                </div>

                <div class="flex justify-end gap-2 hidden" id="import-actions">
                    <button onclick="processImport()"
                        class="px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white font-bold rounded shadow-sm transition-colors flex items-center gap-2">
                        <span>üì•</span> <span data-i18n="btn_import_confirm">Á¢∫Ë™çÂåØÂÖ•</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-4 right-4 z-50 flex flex-col gap-2"></div>



    <script src="squadron_ui.js"></script>


    <!-- Chemistry Editor Modal -->
    <div id="chemistry-modal" class="fixed inset-0 bg-black/50 hidden flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="bg-white dark:bg-slate-800 rounded-lg shadow-2xl w-full max-w-sm mx-4 overflow-hidden border border-slate-200 dark:border-slate-700">
            <div class="p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900">
                <h3 class="font-bold text-lg text-slate-800 dark:text-slate-100">Á∑®ËºØÈöäÂì°ÂêâÂÖÜ</h3>
                <button onclick="closeChemistryModal()" class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-300">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <div class="p-4 space-y-4">
                <div>
                    <label class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1">Ëß∏ÁôºÊ¢ù‰ª∂ (Condition)</label>
                    <select id="chem-modal-cond" class="w-full p-2 border border-slate-300 dark:border-slate-600 rounded bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-slate-100 transition-colors focus:ring-2 focus:ring-blue-500 outline-none">
                        <!-- Options populated by JS -->
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1">ÁôºÂãïÊïàÊûú (Effect)</label>
                    <select id="chem-modal-effect" class="w-full p-2 border border-slate-300 dark:border-slate-600 rounded bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-slate-100 transition-colors focus:ring-2 focus:ring-blue-500 outline-none">
                         <!-- Options populated by JS -->
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1">Êï∏ÂÄº (Value)</label>
                    <select id="chem-modal-val" class="w-full p-2 border border-slate-300 dark:border-slate-600 rounded bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-slate-100 transition-colors focus:ring-2 focus:ring-blue-500 outline-none">
                        <!-- Options populated by JS -->
                    </select>
                </div>

                <div class="pt-2 text-xs text-slate-500 dark:text-slate-400">
                    <p class="mb-1">Ë™™ÊòéÔºöÁï∂ÊªøË∂≥Ëß∏ÁôºÊ¢ù‰ª∂ÊôÇÔºåÂ∞áÁôºÂãïÊåáÂÆöÊïàÊûú„ÄÇ</p>
                </div>
            </div>

            <div class="p-4 border-t border-slate-200 dark:border-slate-700 flex gap-3 bg-slate-50 dark:bg-slate-900">
                 <button onclick="removeChemistry()" class="flex-1 py-2 px-4 rounded bg-red-100 hover:bg-red-200 text-red-700 font-bold transition-colors">
                    ÁßªÈô§
                </button>
                <button onclick="saveChemistry()" class="flex-1 py-2 px-4 rounded bg-blue-600 hover:bg-blue-700 text-white font-bold transition-colors shadow-sm">
                    Á¢∫Ë™çÂÑ≤Â≠ò
                </button>
            </div>
        </div>
    </div>

    <!-- Training Confirmation Modal -->
    <div id="training-confirm-modal"
        class="fixed inset-0 z-50 hidden bg-black/50 backdrop-blur-sm flex items-center justify-center p-4">
        <div
            class="bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-sm flex flex-col border border-slate-200 dark:border-slate-700 transform transition-all scale-100">
            <div class="p-4 border-b border-slate-200 dark:border-slate-700">
                <h3 class="font-bold text-lg dark:text-white">Á¢∫Ë™çË®ìÁ∑¥</h3>
            </div>
            <div class="p-6 text-center">
                <div
                    class="w-16 h-16 mx-auto mb-4 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center">
                    <img id="confirm-training-img" src="" class="w-10 h-10 object-contain">
                </div>
                <p class="text-slate-600 dark:text-slate-300 mb-2">Á¢∫ÂÆöË¶ÅÂü∑Ë°åÊ≠§Ë®ìÁ∑¥ÂóéÔºü</p>
                <p class="font-bold text-lg text-slate-800 dark:text-slate-100" id="confirm-training-name">Physical
                    Training</p>
            </div>
            <div
                class="p-4 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-2 bg-slate-50 dark:bg-slate-900/50 rounded-b-xl">
                <button onclick="closeConfirmModal()"
                    class="px-4 py-2 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 font-medium transition-colors">ÂèñÊ∂à</button>
                <button id="confirm-btn"
                    class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded shadow-sm transition-colors">Á¢∫Ë™ç</button>
            </div>
        </div>
    </div>
</body>

</html>